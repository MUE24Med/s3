<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:Arial;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  color:#fff;
}
.container{
  width:90%;
  max-width:450px;
  background:rgba(0,0,0,.75);
  border-radius:20px;
  padding:16px;
  text-align:center;
}
.notice{
  font-size:12px;
  background:rgba(46,204,113,.15);
  color:#2ecc71;
  padding:6px;
  border-radius:10px;
  margin-bottom:8px
}
.logo{font-size:40px}
h1{font-size:22px;margin:5px 0}
.subtitle{font-size:13px;opacity:.8;margin-bottom:8px}

/* progress */
.progress{height:10px;background:#333;border-radius:5px;overflow:hidden}
.progress span{
  display:block;height:100%;width:0%;
  background:linear-gradient(90deg,#3498db,#2ecc71);
}
.percent{margin:5px 0}
.file{
  font-size:13px;
  background:rgba(255,255,255,.1);
  padding:6px;
  border-radius:8px;
  margin-bottom:6px
}

/* continue */
.continue{
  display:none;
  margin:8px 0;
  padding:10px;
  width:100%;
  border:none;
  border-radius:25px;
  background:#2ecc71;
  font-weight:bold
}

/* game */
.game{
  background:#111;
  height:210px;
  border-radius:12px;
  position:relative;
  overflow:hidden;
  margin-bottom:8px
}
.runner{
  position:absolute;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
  font-size:28px;
}
.item{
  position:absolute;
  top:-30px;
  font-size:26px;
}

/* game over */
.overlay{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.85);
  display:none;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  z-index:10;
}
.overlay h2{margin-bottom:10px}
.restart{
  font-size:30px;
  background:none;
  border:none;
  color:#2ecc71;
  cursor:pointer
}

/* ui */
.stats{
  display:flex;
  justify-content:space-between;
  font-size:14px;
  margin-bottom:6px
}
.controls{
  display:flex;
  gap:10px;
}
.controls button{
  flex:1;
  padding:10px;
  border:none;
  border-radius:20px;
  background:#3498db;
  color:#fff;
  font-weight:bold
}
</style>
</head>

<body>

<div class="container">

  <div class="notice">
    â„¹ï¸ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© ØªØ¸Ù‡Ø± ÙÙŠ Ø£ÙˆÙ„ Ø²ÙŠØ§Ø±Ø© ÙÙ‚Ø· â€” ÙŠØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù„Ø§Ø­Ù‚Ù‹Ø§ Ù…Ù† Ø§Ù„ÙƒØ§Ø´
  </div>

  <div class="logo">ğŸ‘¨â€âš•ï¸</div>
  <h1>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„</h1>
  <div class="subtitle">ØªØ¬Ù†Ø¨ Ø§Ù„Ø¹Ø¯ÙˆÙ‰ ÙˆØ§Ø¬Ù…Ø¹ Ø§Ù„Ø¹Ù„Ø§Ø¬</div>

  <div class="progress"><span id="bar"></span></div>
  <div class="percent" id="percent">0%</div>
  <div class="file" id="file">Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>

  <button class="continue" id="continue" onclick="go()">Ù…ØªØ§Ø¨Ø¹Ø© â¡ï¸</button>

  <div class="stats">
    <div>â¤ï¸ <span id="hearts">0</span></div>
    <div>â­ <span id="score">0</span></div>
  </div>

  <div class="game" id="game">
    <div class="runner" id="runner">ğŸ‘¨â€âš•ï¸</div>

    <div class="overlay" id="overlay">
      <h2>Game Over</h2>
      <button class="restart" onclick="restart()">â–¬</button>
    </div>
  </div>

  <div class="controls">
    <button onclick="move(-1)">â—€</button>
    <button onclick="move(1)">â–¶</button>
  </div>

</div>

<script>
/* loading */
const files=["doctor.png","virus.svg","bacteria.svg","antibiotic.svg"];
let i=0,prog=0;
const bar=document.getElementById("bar");
const percent=document.getElementById("percent");
const file=document.getElementById("file");
const cont=document.getElementById("continue");

const loader=setInterval(()=>{
  prog+=100/files.length;
  bar.style.width=Math.min(prog,100)+"%";
  percent.innerText=Math.round(prog)+"%";
  file.innerText="ØªØ­Ù…ÙŠÙ„: "+files[i];
  i++;
  if(i>=files.length){
    clearInterval(loader);
    file.innerText="âœ” Ø§ÙƒØªÙ…Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„";
    cont.style.display="block";
  }
},700);

/* game logic */
const game=document.getElementById("game");
const runner=document.getElementById("runner");
const heartsEl=document.getElementById("hearts");
const scoreEl=document.getElementById("score");
const overlay=document.getElementById("overlay");

let pos=0, hearts=0, score=0;
let fallSpeed=4;
let playing=true;

function move(d){
  if(!playing) return;
  pos=Math.max(-1,Math.min(1,pos+d));
  runner.style.left=50+pos*30+"%";
}

/* keyboard â€” Ù…Ø¹ÙƒÙˆØ³ Ø­Ø³Ø¨ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ØªØµÙØ­ */
document.addEventListener("keydown",e=>{
  if(e.key==="ArrowRight"||e.key==="d") move(-1);
  if(e.key==="ArrowLeft"||e.key==="a") move(1);
});

function spawnWave(){
  if(!playing) return;

  const count=3+Math.floor(Math.random()*2); // 3 Ø£Ùˆ 4
  for(let n=0;n<count;n++){
    spawnItem();
  }
}

function spawnItem(){
  const r=Math.random();
  let emoji,type;
  if(r<0.3){emoji="ğŸ’Š";type="pill"}
  else if(r<0.6){emoji="ğŸ¦ ";type="bacteria"}
  else{emoji="ğŸ‘¾";type="virus"}

  const el=document.createElement("div");
  el.className="item";
  el.innerText=emoji;
  el.dataset.type=type;
  el.style.left=[20,50,80][Math.floor(Math.random()*3)]+"%";
  game.appendChild(el);

  let y=-30;
  const fall=setInterval(()=>{
    y+=fallSpeed;
    el.style.top=y+"px";

    if(y>150){
      const lane=parseInt(el.style.left);
      const playerLane=[20,50,80][pos+1];

      if(lane===playerLane){
        if(type==="pill") hearts++;
        if(type==="bacteria") hearts--;
        if(type==="virus") hearts-=2;
        heartsEl.innerText=hearts;

        if(hearts<=0){
          gameOver();
        }
      }

      clearInterval(fall);
      el.remove();
      score++;
      scoreEl.innerText=score;
    }
  },30);
}

function gameOver(){
  playing=false;
  overlay.style.display="flex";
}

function restart(){
  hearts=0;
  score=0;
  pos=0;
  fallSpeed=4;
  heartsEl.innerText=hearts;
  scoreEl.innerText=score;
  runner.style.left="50%";
  overlay.style.display="none";
  playing=true;
}

setInterval(()=>{
  spawnWave();
  if(playing) fallSpeed+=0.08;
},900);

function go(){
  location.href="index.html";
}
</script>

</body>
</html>