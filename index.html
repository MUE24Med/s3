<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<meta name="version" content="2025.01.17.004">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>semester-3 / Ø®Ø±ÙŠØ·Ø© Ø§Ù„ÙƒÙ„ÙŠØ© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="color-scheme" content="only light">
  <meta name="supported-color-schemes" content="light">
  <meta name="theme-color" content="#000000">
  <meta name="description" content="Ø®Ø±ÙŠØ·Ø© ØªÙØ§Ø¹Ù„ÙŠØ© Ù„Ù„Ù…Ù†Ù‡Ø¬ Ø§Ù„Ø·Ø¨ÙŠ - ØªØµÙØ­ Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø§Øª ÙˆØ§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ø³Ù‡ÙˆÙ„Ø©">
  <meta name="keywords" content="Ø·Ø¨ØŒ Ù…Ù†Ù‡Ø¬ØŒ Ø®Ø±ÙŠØ·Ø© ØªÙØ§Ø¹Ù„ÙŠØ©ØŒ Ù…Ø­Ø§Ø¶Ø±Ø§ØªØŒ Ø£Ø³Ø¦Ù„Ø©">

  <link rel="preconnect" href="https://raw.githubusercontent.com" crossorigin>
  <link rel="preconnect" href="https://api.github.com" crossorigin>
  <link rel="dns-prefetch" href="https://mozilla.github.io">
  <link rel="icon" type="image/png" href="image/0.png">
  <link rel="apple-touch-icon" href="image/0.png">
  <link rel="stylesheet" href="style.css">

<script>
  const preloadDone = localStorage.getItem("preload_done");
  const lastVisit = localStorage.getItem("last_visit_timestamp");
  const now = Date.now();
  
  if (!preloadDone || !lastVisit || (now - lastVisit > 86400000)) {
    localStorage.setItem("last_visit_timestamp", now);
    if (!preloadDone) {
      location.replace("preload.html");
    }
  }
</script>
</head>
<body>

<button 
  onclick="replayPreload()" 
  style="position: fixed; bottom: 10px; right: 10px; z-index: 99999; 
         padding: 10px; background: #ff5722; color: white; border: none; 
         border-radius: 8px; cursor: pointer; font-size: 14px; box-shadow: 0 4px 10px rgba(0,0,0,0.3);">
  ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
</button>

<div id="group-selection-screen">
  <div id="group-selection-content">
    <img id="main-logo" src="image/0.png" alt="Ø´Ø¹Ø§Ø± Ø§Ù„ÙƒÙ„ÙŠØ©" loading="eager" />
    <h1>Ø§Ø®ØªØ± Ù…Ø¬Ù…ÙˆØ¹ØªÙƒ</h1>
    <div id="group-buttons">
      <button class="group-btn" data-group="A" aria-label="Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© A">
        <span class="group-letter">A</span>
        <span class="group-label">Group A</span>
      </button>
      <button class="group-btn" data-group="B" aria-label="Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© B">
        <span class="group-letter">B</span>
        <span class="group-label">Group B</span>
      </button>
      <button class="group-btn" data-group="C" aria-label="Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© C">
        <span class="group-letter">C</span>
        <span class="group-label">Group C</span>
      </button>
      <button class="group-btn" data-group="D" aria-label="Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© D">
        <span class="group-letter">D</span>
        <span class="group-label">Group D</span>
      </button>
    </div>
    <p style="color: #888; font-size: 12px; margin-top: 20px;">
      ğŸ’¡ ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹ Ù…Ù† Ø²Ø± "ğŸ”„ Change Group"
    </p>
  </div>
</div>

<div id="js-toggle-container" class="top">
  <div id="search-container">
    <input 
      type="text" 
      id="search-input" 
      placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù..."
      autocomplete="off"
      aria-label="Ø­Ù‚Ù„ Ø§Ù„Ø¨Ø­Ø«"
    >
    <span id="search-icon" class="clickable-area" role="button" aria-label="Ø¨Ø­Ø«">ğŸ”™</span>
  </div>

  <div class="controls-row">
    <span 
      id="move-toggle" 
      role="button" 
      aria-label="ØªØ­Ø±ÙŠÙƒ Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª"
      tabindex="0"
    >â†•ï¸</span>

    <span 
      id="eye-toggle" 
      role="button" 
      aria-label="Ø¥Ø®ÙØ§Ø¡/Ø¥Ø¸Ù‡Ø§Ø± Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø«"
      tabindex="0"
      title="Ø¥Ø®ÙØ§Ø¡/Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¨Ø­Ø«"
    >ğŸ‘ï¸</span>

    <div class="hover-toggle-container">
      <span style="font-size: 12px; opacity: 0.8;">Hover</span>
      <label class="switch">
        <input type="checkbox" id="js-toggle" checked aria-label="ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙØ§Ø¹Ù„">
        <span class="slider round"></span>
      </label>
    </div>
  </div>
</div>

<div id="loading-overlay">
  <div id="loading-content">
    <img 
      id="splash-image" 
      src="image/0.png" 
      alt="Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„"
      loading="eager"
    />
    <h1 id="project-loading-title">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</h1>
    <div id="loader-lights" role="progressbar" aria-label="ØªÙ‚Ø¯Ù… Ø§Ù„ØªØ­Ù…ÙŠÙ„">
      <div class="light-bulb" id="bulb-1"></div>
      <div class="light-bulb" id="bulb-2"></div>
      <div class="light-bulb" id="bulb-3"></div>
      <div class="light-bulb" id="bulb-4"></div>
    </div>
    <div id="legend">
      <div class="legend-item red">Ø£Ø³Ø¦Ù„Ø©</div>
      <div class="legend-item yellow">Ù…Ø­Ø§Ø¶Ø±Ø§Øª</div>
      <div class="legend-item white">Ù…ÙˆØ§Ø¯ Ø£Ø®Ø±Ù‰</div>
      <div class="legend-item purple">Ø¥Ø¬Ø§Ø¨Ø§Øª</div>
      <div class="legend-item green">Ø³ÙƒØ§Ø´Ù† Ø§Ù„Ø¹Ù…Ù„ÙŠ</div>
      <div class="legend-item blue">ÙÙŠØ¯ÙŠÙˆ Ø´Ø±Ø­</div>
    </div>
  </div>
</div>

<div id="pdf-overlay" class="hidden">
  <div id="toolbar">
    <button id="closePdfBtn" class="toolbar-btn" aria-label="Ø¥ØºÙ„Ø§Ù‚">âŒ Ø¥ØºÙ„Ø§Ù‚</button>
    <button id="downloadBtn" class="toolbar-btn" aria-label="ØªØ­Ù…ÙŠÙ„">â¬‡ ØªØ­Ù…ÙŠÙ„</button>
    <button id="shareBtn" class="toolbar-btn" aria-label="Ù…Ø´Ø§Ø±ÙƒØ©">ğŸ”— Ù…Ø´Ø§Ø±ÙƒØ©</button>
  </div>
  <iframe 
    id="pdfFrame" 
    src="" 
    loading="lazy"
    title="Ø¹Ø§Ø±Ø¶ PDF"
    sandbox="allow-same-origin allow-scripts allow-popups allow-forms"
  ></iframe>
</div>

<div id="scroll-container">
  <svg 
    id="main-svg" 
    xmlns="http://www.w3.org/2000/svg" 
    xmlns:xlink="http://www.w3.org/1999/xlink" 
    preserveAspectRatio="xMinYMin meet"
    role="img"
    aria-label="Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©"
  >
    <defs>
      <clipPath id="fixed-buttons-clip">
        <rect x="0" y="0" width="1024" height="250"/>
      </clipPath>
    </defs>

    <g transform="translate(0,0)" id="files-list-container">
      <image 
        data-src="image/wood.webp" 
        x="0" 
        y="0" 
        width="1024" 
        height="2454"
        aria-hidden="true"
      />
    </g>

    <g id="dynamic-links-group"></g>
    <g id="group-specific-content"></g>

    <g id="fixed-controls-layer">
      <g id="reset-btn" style="cursor: pointer;" role="button" tabindex="0">
        <rect x="654" y="100" width="250" height="50" rx="10" fill="#d32f2f" stroke="#fff" stroke-width="2"/>
        <text 
          id="reset-btn-text" 
          x="779" 
          y="130" 
          text-anchor="middle" 
          fill="white" 
          font-weight="bold"
          font-size="18"
        >ğŸ”„ Reset</text>
      </g>

      <g id="change-group-btn" style="cursor: pointer;" role="button" tabindex="0">
        <rect x="120" y="100" width="250" height="50" rx="10" fill="#2e7d32" stroke="#fff" stroke-width="2"/>
        <text 
          id="group-btn-text" 
          x="245" 
          y="130" 
          text-anchor="middle" 
          fill="white" 
          font-weight="bold"
          font-size="18"
        >Change Group ğŸ”„</text>
      </g>

      <g id="back-button-group" style="cursor: pointer;" role="button" tabindex="0">
        <rect 
          id="back-btn" 
          x="112" 
          y="160" 
          width="800" 
          height="70" 
          rx="15" 
          fill="#3e2723" 
          stroke="#fff" 
          stroke-width="2" 
        />
        <text 
          x="512" 
          y="205" 
          id="back-btn-text" 
          text-anchor="middle" 
          fill="white"
          font-size="22" 
          font-weight="bold"
        >â¡ï¸ Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø© â¡ï¸</text>
      </g>
    </g>

    <image 
      data-src="image/Upper_wood.webp" 
      x="0" 
      y="0" 
      width="1024" 
      height="250"
      style="pointer-events: none;"
      aria-hidden="true"
    />
  </svg>
</div>

<script defer src="script.js"></script>
<script defer src="tracker.js"></script>

<script>
function replayPreload() {
  localStorage.removeItem('preload_done');
  localStorage.removeItem('last_visit_timestamp');
  window.location.replace('preload.html');
}

async function checkForUpdates() {
  try {
    const lastCheck = localStorage.getItem('last_update_check');
    const now = Date.now();
    
    if (lastCheck && (now - parseInt(lastCheck)) < 300000) {
      console.log('â±ï¸ ØªÙ… Ø§Ù„ÙØ­Øµ Ù…Ø¤Ø®Ø±Ø§Ù‹ - ØªØ®Ø·ÙŠ');
      return;
    }

    console.log('ğŸ” ÙØ­Øµ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª...');

    const response = await fetch('https://api.github.com/repos/MUE24Med/semester-3/commits/main', {
      cache: 'no-store'
    });

    if (!response.ok) {
      console.log('âš ï¸ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ GitHub');
      return;
    }

    const data = await response.json();
    const latestCommitSha = data.sha.substring(0, 7);

    const lastCommitSha = localStorage.getItem('last_commit_sha');

    if (!lastCommitSha) {
      localStorage.setItem('last_commit_sha', latestCommitSha);
      localStorage.setItem('last_update_check', now.toString());
      console.log(`âœ… ØªÙ… Ø­ÙØ¸ SHA Ø§Ù„Ø­Ø§Ù„ÙŠ: ${latestCommitSha}`);
      return;
    }

    if (lastCommitSha !== latestCommitSha) {
      console.log(`ğŸ†• ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙŠØ¯! ${lastCommitSha} â†’ ${latestCommitSha}`);

      if ('caches' in window) {
        const cacheNames = await caches.keys();
        console.log('ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„ÙƒØ§Ø´ Ø§Ù„Ù‚Ø¯ÙŠÙ…...');
        await Promise.all(cacheNames.map(name => caches.delete(name)));
      }

      localStorage.setItem('last_commit_sha', latestCommitSha);
      localStorage.setItem('last_update_check', now.toString());

      console.log('ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©...');
      window.location.reload(true);
    } else {
      localStorage.setItem('last_update_check', now.toString());
      console.log(`âœ… Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ø­Ø¯Ø« (${latestCommitSha})`);
    }
  } catch (error) {
    console.log('âš ï¸ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª:', error);
  }
}

let updateCheckScheduled = false;

window.addEventListener('load', () => {
  if (!updateCheckScheduled) {
    updateCheckScheduled = true;
    setTimeout(checkForUpdates, 5000);
  }
});

document.addEventListener('visibilitychange', () => {
  if (!document.hidden && !updateCheckScheduled) {
    updateCheckScheduled = true;
    setTimeout(() => {
      checkForUpdates();
      updateCheckScheduled = false;
    }, 3000);
  }
});
</script>

</body>
</html>