<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>semester-3 | ุฎุฑูุทุฉ ุงููููุฉ ุงูุชูุงุนููุฉ</title>
  <!-- ... (ูู ุงููุณูู ุงูุฃุฎุฑู ููุง ููุ ูุง ุชุญุฐู ุดูุฆุงู) ... -->
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ======================== ุฌููุน ุนูุงุตุฑ ุงููุงุฌูุฉ ======================== -->

<!-- ุดุงุดุฉ ุงุฎุชูุงุฑ ุทุฑููุฉ ุงููุชุญ -->
<div id="open-method-popup" class="hidden">
  <div class="method-container">
    <div class="method-header">
      <h2>ุงุฎุชุฑ ุทุฑููุฉ ุงููุชุญ</h2>
      <span class="method-close" id="method-close-btn">โ๏ธ</span>
    </div>
    <div class="method-filename" id="method-filename">ุงุณู ุงูููู</div>
    <div class="method-preview">
      <canvas id="method-preview-canvas"></canvas>
      <div class="method-loading" id="method-loading">โณ ุฌุงุฑู ุงูุชุญููู...</div>
    </div>
    <div class="method-buttons">
      <button class="method-btn mozilla-btn" id="open-mozilla-btn">
        <span class="method-btn-icon">๐</span>
        <span class="method-btn-text">Mozilla PDF</span>
      </button>
      <button class="method-btn browser-btn" id="open-browser-btn">
        <span class="method-btn-icon">๐</span>
        <span class="method-btn-text">ุงููุชุตูุญ</span>
      </button>
      <button class="method-btn drive-btn" id="open-drive-btn">
        <span class="method-btn-icon">๐พ</span>
        <span class="method-btn-text">Google Drive</span>
      </button>
    </div>
  </div>
</div>

<!-- ุดุงุดุฉ Preload -->
<div id="preload-screen" class="hidden">
  <div class="preload-container">
    <div class="notice">
      ๐ก ูุฐู ุงูุตูุญุฉ ุชุธูุฑ ูู ุฃูู ุฒูุงุฑุฉ ููุท โ ุงููููุงุช ุณุชูุฎุฒู ูู ุงููุงุด ููุชุญููู ุงูุณุฑูุน ูุงุญูุงู
    </div>
    <div class="logo">๐ฅ</div>
    <h1>ุฌุงุฑู ุงูุชุญููู</h1>
    <div class="subtitle">ุชุฌูุจ ุงูุนุฏูู ๐ฆ ูุงุฌูุน ุงูุนูุงุฌ ๐</div>
    <div class="progress-container">
      <div class="progress-bar" id="progressBar">0%</div>
    </div>
    <div class="file-status" id="fileStatus">ุฌุงุฑู ุงูุจุฏุก...</div>
    <button class="continue-btn" id="continueBtn">ูุชุงุจุนุฉ ุฅูู ุงููููุน โก๏ธ</button>
    <div class="game-container" id="gameContainer">
      <div class="game-stats">
        <div class="game-stat">โค๏ธ <span id="heartsDisplay">0</span></div>
        <div class="game-stat">โญ <span id="scoreDisplay">0</span></div>
      </div>
      <div class="runner" id="runner">๐จโโ๏ธ</div>
      <div class="game-overlay" id="gameOverlay">
        <h2>ุงูุชูุช ุงููุนุจุฉ!</h2>
        <div class="final-score" id="finalScore">ุงูููุงุท: 0</div>
        <button class="restart-btn" id="restartBtn">๐</button>
      </div>
    </div>
    <div class="controls">
      <button class="control-btn" id="leftBtn">โก๏ธ</button>
      <button class="control-btn" id="rightBtn">โฌ๏ธ</button>
    </div>
    <div class="leaderboard">
      <h3>๐ ุฃูุถู 5 ูุงุนุจูู ุนุงูููุงู</h3>
      <ul class="leaderboard-list" id="leaderboardList">
        <li class="leaderboard-item">
          <span class="leaderboard-rank">-</span>
          <span class="leaderboard-name">ุฌุงุฑู ุงูุชุญููู...</span>
          <span class="leaderboard-score">-</span>
        </li>
      </ul>
    </div>
  </div>
</div>

<!-- ุดุงุดุฉ ุงุฎุชูุงุฑ ุงููุฌููุนุฉ -->
<div id="group-selection-screen">
  <div id="group-selection-content">
    <img id="main-logo" src="image/0.png" alt="ุดุนุงุฑ ุงููููุฉ" />
    <h1>ุงุฎุชุฑ ูุฌููุนุชู</h1>
    <div id="group-buttons">
      <button class="group-btn" data-group="A"><span class="group-letter">A</span><span class="group-label">Group A</span></button>
      <button class="group-btn" data-group="B"><span class="group-letter">B</span><span class="group-label">Group B</span></button>
      <button class="group-btn" data-group="C"><span class="group-letter">C</span><span class="group-label">Group C</span></button>
      <button class="group-btn" data-group="D"><span class="group-letter">D</span><span class="group-label">Group D</span></button>
    </div>
    <p style="color: #888; font-size: 12px; margin-top: 20px;">
      ๐ก ููููู ุชุบููุฑ ุงููุฌููุนุฉ ูุงุญูุงู ูู ุฒุฑ "๐ Change Group"
    </p>
  </div>
</div>

<!-- ุดุฑูุท ุงูุฃุฏูุงุช -->
<div id="js-toggle-container" class="top">
  <div id="search-container">
    <input type="text" id="search-input" placeholder="ุงุจุญุซ ุจุงุณู ุงูููู..." autocomplete="off">
    <span id="search-icon" class="clickable-area">๐</span>
  </div>
  <div class="controls-row">
    <span id="move-toggle">โ๏ธ</span>
    <span id="eye-toggle" title="ุฅุฎูุงุก/ุฅุธูุงุฑ ุงูุจุญุซ">๐๏ธ</span>
    <div class="hover-toggle-container">
      <span>Hover</span>
      <label class="switch">
        <input type="checkbox" id="js-toggle" checked>
        <span class="slider round"></span>
      </label>
    </div>
  </div>
</div>

<div id="eye-toggle-standalone" class="top">๐๏ธ</div>

<!-- ุดุงุดุฉ ุงูุชุญููู -->
<div id="loading-overlay">
  <div id="loading-content">
    <img id="splash-image" src="image/0.png" alt="ุดุนุงุฑ ุงูุชุญููู" />
    <h1 id="project-loading-title">ุฌุงุฑู ุงูุชุญููู...</h1>
    <div id="loader-lights">
      <div class="light-bulb" id="bulb-1"></div>
      <div class="light-bulb" id="bulb-2"></div>
      <div class="light-bulb" id="bulb-3"></div>
      <div class="light-bulb" id="bulb-4"></div>
    </div>
    <div id="legend">
      <div class="legend-item red">ุฃุณุฆูุฉ</div>
      <div class="legend-item yellow">ูุญุงุถุฑุงุช</div>
      <div class="legend-item white">ููุงุฏ ุฃุฎุฑู</div>
      <div class="legend-item purple">ุฅุฌุงุจุงุช</div>
      <div class="legend-item green">ุณูุงุดู ุงูุนููู</div>
      <div class="legend-item blue">ููุฏูู ุดุฑุญ</div>
    </div>
  </div>
</div>

<!-- ุนุงุฑุถ PDF -->
<div id="pdf-overlay" class="hidden">
  <div id="toolbar">
    <div id="pdf-controls">
      <button id="closePdfBtn" class="toolbar-btn">โ ุฅุบูุงู</button>
      <button id="downloadBtn" class="toolbar-btn">โฌ ุชุญููู</button>
      <button id="shareBtn" class="toolbar-btn">๐ ูุดุงุฑูุฉ</button>
      <button id="expand-toolbar-btn" class="pdf-control-btn" title="ููุก ุงูุดุงุดุฉ">๐ผ</button>
    </div>
  </div>
  <iframe id="pdfFrame" src="" sandbox="allow-same-origin allow-scripts allow-popups allow-forms"></iframe>
</div>

<!-- ูุงูุฐุฉ ูุนุงููุฉ PDF -->
<div id="pdf-preview-popup" class="floating-preview">
  <div class="preview-container">
    <div class="preview-header">
      <div class="preview-title" id="preview-filename">ูุนุงููุฉ ุงูููู</div>
      <button class="preview-btn preview-open-btn" id="preview-open-btn">๐ ูุชุญ</button>
    </div>
    <div class="preview-canvas-container">
      <div class="preview-loading" id="preview-loading">โณ ุฌุงุฑู ุงูุชุญููู...</div>
      <canvas id="preview-canvas"></canvas>
    </div>
  </div>
</div>

<!-- ุงูุฎุฑูุทุฉ ุงูุชูุงุนููุฉ -->
<div id="scroll-container">
  <svg id="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMinYMin meet">
    <defs></defs>
    <g transform="translate(0,0)" id="files-list-container">
      <image data-src="image/wood.webp" x="0" y="0" width="1024" height="2454" style="pointer-events: none;" />
    </g>
    <g id="dynamic-links-group"></g>
    <g id="group-specific-content"></g>
    <g id="upper-wood-layer" style="pointer-events: none; z-index: 3;">
      <image data-src="image/Upper_wood.webp" x="0" y="0" width="1024" height="250" style="pointer-events: none;" />
    </g>
    <g id="fixed-controls-layer">
      <g id="change-group-btn" style="cursor: pointer;">
        <rect x="120" y="100" width="250" height="50" rx="10"/>
        <text id="group-btn-text" x="245" y="130" text-anchor="middle" dominant-baseline="middle">Change Group ๐</text>
      </g>
      <g id="preload-btn" style="cursor: pointer;">
        <rect x="387" y="100" width="250" height="50" rx="10"/>
        <text x="512" y="130" text-anchor="middle" dominant-baseline="middle">๐ ุดุงุดุฉ ุงูุชุญููู</text>
      </g>
      <g id="reset-btn" style="cursor: pointer;">
        <rect x="654" y="100" width="250" height="50" rx="10"/>
        <text id="reset-btn-text" x="779" y="130" text-anchor="middle" dominant-baseline="middle">๐ Reset</text>
      </g>
      <g id="back-button-group" style="cursor: pointer;">
        <rect id="back-btn" x="112" y="160" width="800" height="70" rx="15" />
        <text x="512" y="195" id="back-btn-text" text-anchor="middle" dominant-baseline="middle">โก๏ธ ุฅูู ุงูุฎุฑูุทุฉ โก๏ธ</text>
      </g>
    </g>
  </svg>
</div>

<!-- ======================== ููุงูุฉ ุนูุงุตุฑ ุงููุงุฌูุฉ ======================== -->

  <!-- โ ุงูููุชุจุงุช ุงูุฎุงุฑุฌูุฉ -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script>
    if (typeof pdfjsLib !== 'undefined') {
      pdfjsLib.GlobalWorkerOptions.workerSrc = 
        'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    }
  </script>

  <!-- โ ุงูุณูุฑูุจุช ุงูุฑุฆูุณู โ ูู ุงูุฌุฐุฑ โ ูู ุงููุญูุฏ ุงูุฐู ูุญูู type="module"?
       ูุงุ type="module" ููุณ ุถุฑูุฑูุงูุ ุงุณุชุฎุฏู src ุนุงุฏู -->
  <script src="script.js"></script>

  <!-- โ Tracker (ุบูุฑ ูุนูุงุฑู) -->
  <script src="tracker.js"></script>

  <!-- โ Service Worker (ููุณุฌู ุจุนุฏ ุชุญููู ุงูุตูุญุฉ) -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js')
          .then(reg => console.log('โ SW ูุณุฌู'))
          .catch(err => console.error('โ SW ูุดู:', err));
      });
    }
  </script>

  <!-- โ ูุญุต ุงูุชุญุฏูุซุงุช (ุงุฎุชูุงุฑู) -->
  <script>
    // ... ููุฏ ูุญุต ุงูุชุญุฏูุซุงุช ...
  </script>
</body>
</html>